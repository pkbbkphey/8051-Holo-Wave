; ====== SOME MACROS =======
ADCTL       EQU 0C5H
ADCH        EQU 0C6H
ADCL        EQU 0BEH
P1M0        EQU 091H
P1M1        EQU 092H
AUXR        EQU 08EH
; ==========================


ORG 0050H

SETTING:
    MOV ADCTL,#0E2H    ; ADCON SPEED1 SPEED0 ADCI  ADCS CHS2 CHS1 CHS0

    ORL P1M0,#00000100B
    ANL P1M1,#11111011B

    ANL AUXR,#10111111B

    ORL ADCTL,#00001000B

WAIT_LOOP:
    MOV ACC,ADCTL
    JNB ACC.4,WAIT_LOOP

    MOV P0,ADCH

    ANL ADCTL,#11101111B    ; CLEAR ADCI
    ORL ADCTL,#00001000B    ; SET ADCS

    AJMP WAIT_LOOP